(()=>{let e,t,n,i,l,r,a,c,s,o,d,h=!1,m=!1,u=!1,p=!1,v=!1;function f(e){const t=document.querySelectorAll("input[placeholder], textarea[placeholder]");for(let n of t)if(n.placeholder===e)return n;return null}function _(e){const t=document.querySelectorAll("button, h3, h2, h1, span, div");for(let n of t)if(n.textContent.trim()===e)return n;return null}function g(){window.addEventListener("getAdress",(function(e){if(e.detail){const t=e.detail,n=_("TRADE"),i=n.parentElement,l=n.className;if(document.getElementById("sendInvite"))document.getElementById("sendInvite").value=t;else{const e=document.createElement("button");e.id="sendInvite",e.className=l,e.textContent="Invite To Dm",e.style.marginBottom="-16px",e.value=t,i.insertBefore(e,i.firstChild)}document.getElementById("sendInvite").addEventListener("click",(()=>{localStorage.setItem("adressToInvite",t),window.postMessage({type:"openInvitePopup"},"*")}))}}))}function y(){const e=document.getElementById("chat-history-bottom-position").parentElement.children[2].children[0].children[0].children[0].parentElement.parentElement;for(let t=0;t<e.children.length;t++)e.children[t].children[0].addEventListener("click",(()=>{g()}),{once:!0})}function E(){let t=setInterval((()=>{const n=e.children[0].children[2].children[1],r=e.children[0].children[0].children[1],a=_("Amount:");if(a){if(clearInterval(t),a.parentElement.parentElement.addEventListener("click",(()=>{setTimeout(E,200)}),{once:!0}),setTimeout((()=>{l=a.parentElement.children[2].firstElementChild.firstElementChild,i=l.getAttribute("aria-label")}),100),n){let e=n.getAttribute("aria-label").match(/([\d,]+)/);e&&(s=e[1])}if(r){let e=r.getAttribute("aria-label").match(/([\d,]+)/);e&&(s=e[1])}setTimeout((()=>{if(i.includes("COCO")){m=!0;let e=i.match(/(\d|,)+/)[0].replace(/,/g,".");s=e,l.textContent=s}if(i.includes("NANA")){u=!0;let e=i.match(/(\d|,)+/)[0].replace(/,/g,".");s=e,l.textContent=s}}),200)}}),100)}function b(){if(!0===p){const e=document.querySelector("#STATS"),t=document.querySelector("#percentChimp"),n=document.querySelector("#percentTang"),i=_("Event table");try{const l=i.parentElement.parentElement.parentElement.parentElement.children[0].children[0].children[0].children[0];l&&l.addEventListener("click",(function e(){if(!h){let t=setInterval((()=>{_("Location Stats")&&(clearInterval(t),b())}),50);l.removeEventListener("click",e),h=!0}}));const s=_("Location Stats").parentElement.parentElement.children[2],o=s.children[3].children[1],d=s.children[1].children[1],m=s.children[0].children[1],u=m.className,p=s.children[0].children[2].className;if(m){const i=o.textContent,l=1e3*parseInt(i);let v=d.textContent,f=m.textContent,_=parseInt(v),g=parseInt(f);const y=Math.round(_/(_+g)*100),E=Math.round(g/(_+g)*100),b=Math.floor(l/(_+g));if(n?n.innerHTML=`\n      <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96" fill="none">\n      <span class="${u}">${y}%</span>\n      <span class="${p}">Of Tangs</span>  \n`:(a=document.createElement("li"),a.className="_asideListItem_13mm0_67",a.id="percentTang",a.innerHTML=`\n        <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96" fill="none">\n        <span class="${u}">${y}%</span>\n        <span class="${p}">Of Tangs</span>  \n        `),t?t.innerHTML=`\n      <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96" fill="none">\n      <span class="${u}">${E}%</span>\n      <span class="${p}">Of Chimps</span>  \n`:(r=document.createElement("li"),r.className="_asideListItem_13mm0_67",r.id="percentChimp",r.innerHTML=`\n        <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96" fill="none">\n        <span class="${u}">${E}%</span>\n        <span class="${p}">Of Chimps</span>  \n        `),e)e.innerHTML=`\n        <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96" fill="none">\n        <span class="${u}">${b}</span>\n        <span class="${p}">$COCO per TANG/CHIMP</span>\n          \n\n      `;else{const e=document.createElement("li");e.className="_asideListItem_13mm0_67",e.id="STATS",e.innerHTML=`\n        <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96" fill="none">\n        <span class="${u}">${b}</span>\n        <span class="${p}">$COCO per TANG/CHIMP</span>\n      \n      `}s&&(s.appendChild(c),s.appendChild(r),s.appendChild(a)),h=!1}}catch(e){}}}function C(){let e;const t=document.querySelector("body > div.MuiDialog-root.MuiModal-root.css-126xj0f > div.MuiDialog-container.MuiDialog-scrollPaper._scrollPaper_gnyli_18.css-ekeie0 > div > div._socialContent_1tyqk_1._tabContent_75try_15 > div._main_1tyqk_169 > div._mainContent_1tyqk_241 > div._mainContentRight_1tyqk_249 > div._mintContent_1tyqk_258 > div._mintContentFooter_1tyqk_308");if(t){const n=document.querySelector("body > div.MuiDialog-root.MuiModal-root.css-126xj0f > div.MuiDialog-container.MuiDialog-scrollPaper._scrollPaper_gnyli_18.css-ekeie0 > div > div._socialContent_1tyqk_1._tabContent_75try_15 > div._main_1tyqk_169 > div._mainContent_1tyqk_241 > div._mainContentRight_1tyqk_249 > div._mintContent_1tyqk_258 > div._mintContentFooter_1tyqk_308 > div:nth-child(1) > div"),i=document.querySelector("body > div.MuiDialog-root.MuiModal-root.css-126xj0f > div.MuiDialog-container.MuiDialog-scrollPaper._scrollPaper_gnyli_18.css-ekeie0 > div > div._socialContent_1tyqk_1._tabContent_75try_15 > div._main_1tyqk_169 > div._mainContent_1tyqk_241 > div._mainContentRight_1tyqk_249 > div._mintContent_1tyqk_258 > div._mintContentHeader_1tyqk_287 > div:nth-child(2) > div");e=parseFloat(i.textContent)/parseFloat(n.textContent)*100;const l=document.createElement("div");l.className="_mintContentHeaderStat_1tyqk_337",l.innerHTML=`\n    <p class="_mintContentLabel_1tyqk_378">chance per contract</p>\n    <div class="_mintContentHeaderStatValue_1tyqk_398">${e.toFixed(2)}%</div>\n    `,t.insertBefore(l,t.children[1]),document.querySelector("body > div.MuiDialog-root.MuiModal-root.css-126xj0f > div.MuiDialog-container.MuiDialog-scrollPaper._scrollPaper_gnyli_18.css-ekeie0 > div > div._navigation_75try_27 > ul > li:nth-child(1)").addEventListener("click",(()=>{setTimeout(C,500),setTimeout(I,500),setTimeout(b,500)}),{once:!0})}}function I(){if(!0===p){const e=_("ORANGUTANS COMING").parentElement.parentElement.parentElement.children[1].children[1].children[1].children[1].firstElementChild,t=e.children[0],n=e.children[1],i=t.children[0].children[0],l=n.children[0].children[0],r=i.children[1],a=l.children[1],c=r.className,s=t.children[0].children[3].children[0].children[0].children[1],h=n.children[0].children[3].children[0].children[0].children[1];if(r){let e=r.textContent.match(/\d+/),t=parseInt(e),n=a.textContent.match(/\d+/),i=parseInt(n),l=parseFloat(s.textContent),c=i/parseFloat(h.textContent)*100;o=(t/l*100).toFixed(3),d=c.toFixed(3)}if(i&&!1===v){const e=document.createElement("div");e.className=c,e.id="raffle1",e.textContent=o+"% chance per ticket",document.getElementById("raffle1")||i.appendChild(e);const t=document.createElement("div");t.className=c,t.id="raffle2",t.textContent=d+"% chance per ticket",document.getElementById("raffle2")||l.appendChild(t)}}}function w(){const e=document.querySelector("#notification-scroller > div > div").children;for(let t=0;t<e.length;t++)e[t].addEventListener("click",(()=>{M(n[t].walletId,n[t].wallet.username)}))}function M(e,t){_("Hub").click();let n=setInterval((()=>{const i=_("Player search").firstElementChild;if(i){clearInterval(n),i.click();let l=setInterval((()=>{const n=f("Player Search");if(n){clearInterval(l),Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(n,e),n.dispatchEvent(new Event("input",{bubbles:!0}));let i=setInterval((()=>{const e=document.querySelector("#player-scroller > div.infinite-scroll-component__outerdiv > div > div > div");e&&e.textContent==t&&(clearInterval(i),e.click(),g())}),30)}}),30)}}),30)}function k(e){const t=e.className.split(" "),n=/_left/;let i=0;return t.forEach((e=>{n.test(e)&&i++})),i}function x(e){e&&e.addEventListener("click",(()=>{let e=setInterval((()=>{let t;const n=document.getElementById("gang-scroller"),i=_("MEMBERS");let l;if(n)l=_("VIEW GANG").nextElementSibling,t=n.parentElement.parentElement;else if(i){let e=_("BACK").parentElement.parentElement.children[1].firstElementChild;l=e,t=i.parentElement.parentElement.parentElement.parentElement}if(i){clearInterval(e),T(t,l);const n={attributes:!0,attributeFilter:["class"]};new MutationObserver(((e,n)=>{e.forEach((e=>{"attributes"===e.type&&"class"===e.attributeName&&2===k(t)&&T(t,l)}))})).observe(t,n)}else if(n){clearInterval(e);const n={attributes:!0,attributeFilter:["class"]};new MutationObserver(((e,n)=>{e.forEach((e=>{"attributes"===e.type&&"class"===e.attributeName&&2===k(t)&&T(t,l)}))})).observe(t,n)}}),50)}),{once:!0})}function T(e,n){let i=setInterval((()=>{const l=e.children[0].children[0].children[1];if(l){let e=l.firstElementChild,r=l.children[1].className;e&&e.className!=r&&l.removeChild(l.children[0]),clearInterval(i);let a=0;for(let e=0;e<l.children.length;e++){l.children[e].style.cursor="pointer",a=e,"Left"===t.memberships[e].status&&a++;let i=l.children[e],r=t.memberships[a];i.addEventListener("click",(()=>{N(r.wallet.username,r.walletId,n)}))}}}),300)}function N(e,t,n){let i=setInterval((()=>{if(n){clearInterval(i),n.click();let l=setInterval((()=>{const n=_("Hub");if(n){clearInterval(l),n.click();let i=setInterval((()=>{const n=_("Player search").firstElementChild;if(n){clearInterval(i),n.click();let l=setInterval((()=>{const n=f("Player Search");if(n){clearInterval(l),Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(n,t),n.dispatchEvent(new Event("input",{bubbles:!0}));let i=setInterval((()=>{const t=document.querySelector("#player-scroller > div.infinite-scroll-component__outerdiv > div > div > div");t&&t.textContent==e&&(clearInterval(i),t.click(),g())}),30)}}),30)}}),30)}}),30)}}),30)}document.querySelector("body > div.MuiDialog-root.MuiModal-root.css-126xj0f > div.MuiDialog-container.MuiDialog-scrollPaper.Dialog_scrollPaper__BgbbA.css-ekeie0 > div > div"),document.querySelector("body > div.MuiDialog-root.location_root__6XsDH.MuiModal-root.css-126xj0f"),function(){let i=setInterval((()=>{let e=_("Gangs");e&&(clearInterval(i),x(e))}),50),l=setInterval((()=>{let t=_("City"),n=_("Hub");try{const i=t.parentElement.children[1].className;(_("Safehouse")||i.includes("_toggle--active")&&n)&&(clearInterval(l),function(){const t=_("Gangs").parentElement.children[1].firstElementChild;e=t;new MutationObserver(((e,n)=>{e.forEach((e=>{"attributes"===e.type&&"class"===e.attributeName&&(t.className.includes("_button--black")?E():withdrawClick=!1)}))})).observe(t,{attributes:!0,attributeFilter:["class"]})}(),function(){const e=document.querySelector("#root");new MutationObserver(((e,t)=>{for(const t of e)if("attributes"===t.type&&"aria-hidden"===t.attributeName)if("true"===t.target.getAttribute("aria-hidden")){p=!0;let e=setInterval((()=>{const t=_("Location Stats"),n=_("Blackmarket");if(t&&(clearInterval(e),setTimeout(b,700)),n){clearInterval(e);let t=setInterval((()=>{const e=_("ORANGUTANS COMING");if(e)try{e.parentElement.parentElement.parentElement.children[1].children[1].children[1].children[1].firstElementChild.firstElementChild&&(clearInterval(t),setTimeout(C,700),setTimeout(I,700))}catch(e){}}),50)}}),100)}else{const e=_("Gangs");setTimeout((()=>{x(e)}),700),p=!1}})).observe(e,{attributes:!0,attributeFilter:["aria-hidden"]})}())}catch(e){}}),50),r=setInterval((()=>{let e=_("Heist Chat");if(e){clearInterval(r);const t=e.parentElement.children[0],n={attributes:!0,attributeFilter:["class"]};new MutationObserver(((e,n)=>{for(const n of e)"attributes"===n.type&&"class"===n.attributeName&&(t.className.includes("undefined")||y())})).observe(t,n)}}),50),a=setInterval((()=>{_("The heist game")&&(clearInterval(a),function(){var e=window.XMLHttpRequest;window.XMLHttpRequest=function(){let i=new e;return i.onreadystatechange=function(){4==i.readyState&&200==i.status&&(/https:\/\/api\.theheist\.game\/gang\/\d+$/.test(i.responseURL)&&(t=JSON.parse(i.responseText)),i.responseURL.includes("https://api.theheist.game/notification/history?offset=0&limit=10")&&(n=JSON.parse(i.responseText)),i.responseURL.includes("https://api.theheist.game/notification/history?offset=10&limit=10")&&(function(e){let t=Object.keys(n).length;e.forEach(((e,i)=>{n[t+i]=e}))}(JSON.parse(i.responseText)),setTimeout(w,1e3)))},i};const i=_("The heist game").parentElement.children[0].children[0];new MutationObserver(((e,t)=>{e.forEach((e=>{"attributes"===e.type&&"class"===e.attributeName&&i.className.includes("_active")&&setTimeout(w,1e3)}))})).observe(i,{attributes:!0,attributeFilter:["class"]})}(),function(){let e=new CustomEvent("notification");const t=_("The heist game").parentElement.children[0].children[1];let n=parseFloat(t.textContent);new MutationObserver((i=>{i.forEach((i=>{"childList"!==i.type&&"characterxhrNotificationData"!==i.type||(n=parseFloat(t.textContent),n>0&&window.dispatchEvent(e))}))})).observe(t,{childList:!0,characterxhrNotificationData:!0,subtree:!0})}())}),50)}()})();